{
    "walkthrough": [
        {
            "id": "welcome",
            "type": "conditional",
            "condition": "hive.hasKey('walkthrough_checkpoint')",
            "question": "Welcome! We see you have some progress saved. Would you like to retrieve it?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "import_progress"
                },
                {
                    "label": "No",
                    "nextStepId": "start_location"
                }
            ]
        },
        {
            "id": "import_progress",
            "type": "action",
            "action": "importHiveCheckpoint",
            "nextStepId": "dynamic_home"
        },
        {
            "id": "start_location",
            "type": "question",
            "text": "Let's get you started! Where are you currently?",
            "options": [
                {
                    "label": "Halifax Airport",
                    "nextStepId": "navigation_pref"
                },
                {
                    "label": "Acadia University",
                    "nextStepId": "navigation_pref"
                },
                {
                    "label": "Wolfville",
                    "nextStepId": "navigation_pref"
                },
                {
                    "label": "New Minas",
                    "nextStepId": "navigation_pref"
                },
                {
                    "label": "Kentville",
                    "nextStepId": "navigation_pref"
                },
                {
                    "label": "Halifax",
                    "nextStepId": "navigation_pref"
                },
                {
                    "label": "Other",
                    "nextStepId": "generic_homescreen"
                }
            ]
        },
        {
            "id": "navigation_pref",
            "type": "question",
            "text": "What type of guidance would you like?",
            "options": [
                {
                    "label": "In-depth",
                    "nextStepId": "next_after_navigation",
                    "action": "setnavigationPreference('in-depth')"
                },
                {
                    "label": "Basic",
                    "nextStepId": "next_after_navigation",
                    "action": "setnavigationPreference('basic')"
                }
            ]
        },
        {
            "id": "next_after_navigation",
            "type": "conditional",
            "condition": "user.selectedLocation == 'Halifax Airport'",
            "nextStepId": "halifax_airport_intro",
            "elseNextStepId": "check_other_locations"
        },
        {
            "id": "check_other_locations",
            "type": "conditional",
            "condition": "user.selectedLocation == 'Acadia University'",
            "nextStepId": "acadia_intro",
            "elseNextStepId": "check_valley_or_city"
        },
        {
            "id": "check_valley_or_city",
            "type": "conditional",
            "condition": "['Wolfville','New Minas','Kentville'].contains(user.selectedLocation)",
            "nextStepId": "valley_intro",
            "elseNextStepId": "city_intro"
        },
        {
            "id": "halifax_airport_intro",
            "type": "question",
            "text": "Are you new to Canada?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "immigration_baggage"
                },
                {
                    "label": "No",
                    "nextStepId": "airport_transport"
                }
            ]
        },
        {
            "id": "immigration_baggage",
            "type": "question",
            "text": "Do you need help with immigration and baggage?",
            "options":[
                {
                    "label": "Yes",
                    "nextStepId": "immigration_baggage_help"
                },
                {
                    "label": "No",
                    "nextStepId": "airport_transport"
                }
            ]
        },
        {
            "id": "immigration_baggage_help",
            "type": "action",
            "action": "showImmigrationBaggageHelp",
            "nextStepId": "airport_transport"
        },
        {
            "id": "airport_transport",
            "type": "question",
            "text": "How do you plan on navigating out of the airport?",
            "options":[
                {
                    "label": "University Shuttle",
                    "nextStepId": "shuttle_info"
                },
                {
                    "label": "Friend/Family",
                    "nextStepId": "friend_family_info"
                },
                {
                    "label": "Public Bus",
                    "nextStepId": "public_bus_info"
                },
                {
                    "label": "Taxi",
                    "nextStepId": "taxi_info"
                },
                {
                    "label": "Not Sure",
                    "nextStepId": "international_centre_info"
                }
            ]
        },
        {
            "id": "shuttle_info",
            "type": "action",
            "action": "showShuttleGuidance",
            "nextStepId": "airport_sim"
        },
        {
            "id": "friend_family_info",
            "type": "action",
            "action": "showFriendFamilyGuidance",
            "nextStepId": "airport_sim"
        },
        {
            "id": "public_bus_info",
            "type": "action",
            "action": "showBusGuidance",
            "nextStepId": "airport_sim"
        },
        {
            "id": "taxi_info",
            "type": "action",
            "action": "showTaxiGuidance",
            "nextStepId": "airport_sim"
        },
        {
            "id": "international_centre_info",
            "type": "action",
            "action": "showAirportHelp",
            "nextStepId": "airport_sim"
        },
        {
            "id": "airport_sim",
            "type": "question",
            "text": "Do you need a SIM card?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "sim_kiosk"
                },
                {
                    "label": "No",
                    "nextStepId": "airport_help"
                }
            ]
        },
        {
            "id": "sim_kiosk",
            "type": "action",
            "action": "showSIMKioskInfo",
            "nextStepId": "airport_help"
        },
        {
            "id": "airport_help",
            "type": "question",
            "text": "Do you need airport assistance?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "show_airport_help"
                },
                {
                    "label": "No",
                    "nextStepId": "airport_next_steps"
                }
            ]
        },
        {
            "id": "show_airport_help",
            "type": "action",
            "action": "displayAirportHelpInfo",
            "nextStepId": "airport_next_steps"
        },
        {
            "id": "airport_next_steps",
            "type": "question",
            "text": "What's next?",
            "options": [
                {
                    "label": "Head to Acadia",
                    "nextStepId": "acadia_intro",
                    "condition": "!hive.hasKey('acadia_intro_completed')",
                    "elseNextStepId": "explore_acadia"
                },
                {
                    "label": "Head to the Valley (Wolfville, New Minas, Kentville)",
                    "nextStepId": "valley_intro",
                    "condition": "!hive.hasKey('valley_intro_completed')",
                    "elseNextStepId": "choose_valley_town"
                },
                {
                    "label": "Explore Halifax",
                    "nextStepId": "city_intro",
                    "condition": "!hive.hasKey('city_intro_completed')",
                    "elseNextStepId": "explore_halifax"
                },
                {
                    "label": "Explore Halifax Airport",
                    "nextStepId": "explore_airport"
                },
                {
                    "label": "Skip",
                    "nextStepId": "generic_homescreen"
                }
            ]
        },
        {
            "id": "explore_airport",
            "type": "action",
            "action": "navigateToAirportHomeScreen",
            "nextStepId": "dynamic_home"
        },
        {
            "id": "acadia_intro",
            "type": "question",
            "text": "Is this your first time at Acadia University?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "acadia_transport"
                },
                {
                    "label": "No",
                    "nextStepId": "explore_acadia"
                }
            ]
        },
        {
            "id": "acadia_transport",
            "type": "question",
            "text": "How did you reach Acadia?",
            "options": [
                {
                    "label": "University Shuttle",
                    "nextStepId": "shuttlePointers"
                },
                {
                    "label": "Friend/Family",
                    "nextStepId": "friend_family_pointers"
                },
                {
                    "label": "Public Bus",
                    "nextStepId": "busPointers"
                },
                {
                    "label": "Taxi",
                    "nextStepId": "taxiPointers"
                }
            ]
        },
        {
            "id": "shuttlePointers",
            "type": "action",
            "action": "showShuttlePointers",
            "nextStepId": "acadia_housing"
        },
        {
            "id": "friend_family_pointers",
            "type": "action",
            "action": "showFriendFamilyPointers",
            "nextStepId": "acadia_housing"
        },
        {
            "id": "busPointers",
            "type": "action",
            "action": "showBusPointers",
            "nextStepId": "acadia_housing"
        },
        {
            "id": "taxiPointers",
            "type": "action",
            "action": "showTaxiPointers",
            "nextStepId": "acadia_housing"
        },
        {
            "id": "acadia_housing",
            "type": "question",
            "text": "Where do you plan on staying for the year?",
            "options": [
                {
                    "label": "On Campus",
                    "nextStepId": "acadia_campus"
                },
                {
                    "label": "Off Campus",
                    "nextStepId": "acadia_off_campus"
                }
            ]
        },
        {
            "id": "acadia_campus",
            "type": "action",
            "action": "showCampusResDirections",
            "params": {
                "residences": [
                    "Chase Court",
                    "Chipman House",
                    "Christofor Hall",
                    "Crowell Tower",
                    "55 University Ave (formerly known as Cutten House)",
                    "Dennis House",
                    "Eaton House",
                    "Roy Jodrey Hall",
                    "Seminary House",
                    "War Memorial House (also known as Barrax or Rax)",
                    "Whitman House (also known as Tully)"
                ],
                "startingPointsQuery" : {
                    "area_tag": "acadia",
                    "parent_id_null": true
                }
            },
            "nextStepId": "acadia_sim"
        },
        {
            "id": "acadia_off_campus",
            "type": "action",
            "action": "enterOffCampusAddress",
            "nextStepId": "acadia_sim"
        },
        {
            "id": "acadia_sim",
            "type": "question",
            "text": "Do you need a SIM card?",
            "options":[
                {
                    "label": "Yes",
                    "nextStepId": "acadia_sim_directions"
                },
                {
                    "label": "No",
                    "nextStepId": "acadia_next_steps"
                }
            ]
        },
        {
            "id": "acadia_sim_directions",
            "type": "action",
            "action": "showSIMDirections",
            "params": {
                "locations": [
                    "Wong International Centre",
                    "New Minas"
                ]
            },
            "nextStepId": "acadia_next_steps"
        },
        {
            "id": "acadia_next_steps",
            "type": "question",
            "text": "Where do you want to go next?",
            "options": [
                {
                    "label": "On Campus",
                    "nextStepId": "explore_acadia"
                },
                {
                    "label": "Off Campus",
                    "nextStepId": "valley_intro"
                }
            ]
        },
        {
            "id": "explore_acadia",
            "type": "action",
            "action": "navigateToAcadiaHomeScreen",
            "nextStepId": "dynamic_home"
        },
        {
            "id": "valley_intro",
            "type": "question",
            "text": "Welcome to the Annapolis Valley! Are you already settled here, or just arriving?",
            "options": [
                {
                    "label": "Just arriving",
                    "nextStepId": "valley_arrival_help"
                },
                {
                    "label": "Already here",
                    "nextStepId": "choose_valley_town"
                }
            ]
        },
        {
            "id": "valley_arrival_help",
            "type": "info",
            "text": "No worries, let's help you get started. You can pick the town you're in, and we'll show nearby essentials like grocery stores, pharmacies, and transit.",
            "options": [
                {
                    "label": "Continue",
                    "nextStepId": "choose_valley_town"
                }
            ]
        },
        {
            "id": "choose_valley_town",
            "type": "question",
            "text": "Which town are you currently in?",
            "options": [
                {
                    "label": "Wolfville",
                    "nextStepId": "wolfville_intro"
                },
                {
                    "label": "New Minas",
                    "nextStepId": "newminas_intro"
                },
                {
                    "label": "Kentville",
                    "nextStepId": "kentville_intro"
                }
            ]
        },
        {
            "id": "wolfville_intro",
            "type": "question",
            "text": "Welcome to Wolfville, the town of Acadia University! Would you like help finding essentials before you explore?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "wolfville_help"
                },
                {
                    "label": "No, show me around!",
                    "nextStepId": "explore_wolfville"
                }
            ]
        },
        {
            "id": "wolfville_help",
            "type": "action",
            "action": "showWolfvilleEssentials",
            "params": {
                "categories": [
                    "Grocery",
                    "SIM",
                    "Transport",
                    "Banking",
                    "Pharmacy"
                ]
            },
            "nextStepId": "explore_wolfville"
        },
        {
            "id": "explore_wolfville",
            "type": "action",
            "action": "navigateToWolfvilleHomeScreen",
            "nextStepId": "dynamic_home"
        },
        {
            "id": "newminas_intro",
            "type": "question",
            "text": "Welcome to New Minas, a hub for shopping and services. Need help finding anything?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "newminas_help"
                },
                {
                    "label": "No, show me around!",
                    "nextStepId": "explore_newminas"
                }
            ]
        },
        {
            "id": "newminas_help",
            "type": "action",
            "action": "showNewMinasEssentials",
            "params": {
                "categories": ["Grocery", "Pharmacy", "Electronic", "SIM", "Shopping"]
            },
            "nextStepId": "explore_newminas"
        },
        {
            "id": "explore_newminas",
            "type": "action",
            "action": "navigateToNewMinasHomeScreen",
            "nextStepId": "dynamic_home"
        },
        {
            "id": "kentville_intro",
            "type": "question",
            "text": "Welcome to Kentville! Would you like a quick overview of available services?",
            "options": [
                {
                    "label": "Yes",
                    "nextStepId": "kentville_help"
                },
                {
                    "label": "No, take me to Explore mode",
                    "nextStepId": "explore_kentville"
                }
            ]
        },
        {
            "id": "kentville_help",
            "type": "action",
            "action": "showKentvilleEssentials",
            "params": {
                "categories": ["Government Services", "Medical", "Transportation", "Shopping"]
            },
            "nextStepId": "explore_kentville"
        },
        {
            "id": "explore_kentville",
            "type": "action",
            "action": "navigateToKentvilleHomeScreen",
            "nextStepId": "dynamic_home"
        },
        {
            "id": "city_intro",
            "type": "info",
            "text": "Welcome to Halifax! The capital of Nova Scotia — vibrant, coastal, and full of culture. What would you like to do first?",
            "options":[
                {
                    "label": "Figure out transportation",
                    "nextStepId": "halifax_transport"
                },
                {
                    "label": "Find essentials (SIM, groceries, etc.)",
                    "nextStepId": "halifax_essentials"
                },
                {
                    "label": "See top spots quickly",
                    "nextStepId": "halifax_spots_intro"
                },
                {
                    "label": "Take me to the home screen!",
                    "nextStepId": "explore_halifax"
                }
            ]
        },
        {
            "id": "halifax_transport",
            "type": "question",
            "text": "How do you plan on getting around Halifax?",
            "options": [
                {
                    "label": "Bus (Public Transit)",
                    "nextStepId": "halifax_transit"
                },
                {
                    "label": "Taxi / Ride-share",
                    "nextStepId": "halifax_taxi"
                },
                {
                    "label": "Rental Car",
                    "nextStepId": "halifax_car_rental"
                }
            ]
        },
        {
            "id": "halifax_transit",
            "type": "action",
            "action": "showHalifaxTransitGuide",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_taxi",
            "type": "action",
            "action": "showHalifaxTaxiGuide",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_car_rental",
            "type": "action",
            "action": "showHalifaxCarRentalGuide",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_essentials",
            "type": "question",
            "text": "What essential are you looking for?",
            "options": [
                {
                    "label": "SIM / Phone plan",
                    "nextStepId": "halifax_sim_info"
                },
                {
                    "label": "Groceries & pharmacy",
                    "nextStepId": "halifax_groceries_info"
                },
                {
                    "label": "Banking & currency",
                    "nextStepId": "halifax_banking_info"
                }
            ]
        },
        {
            "id": "halifax_sim_info",
            "type": "action",
            "action": "showHalifaxSIMLocations",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_groceries_info",
            "type": "action",
            "action": "showHalifaxGroceriesPharmacy",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_banking_info",
            "type": "action",
            "action": "showHalifaxBankingOptions",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_spots_intro",
            "type": "question",
            "text": "Would you like to see a few quick highlights around Halifax?",
            "options": [
                {
                    "label": "Yes, show me",
                    "nextStepId": "halifax_spots_action"
                },
                {
                    "label": "No, I’ll skip this",
                    "nextStepId": "halifax_next_steps"
                }
            ]
        },
        {
            "id": "halifax_spots_action",
            "type": "action",
            "action": "showHalifaxAttractions",
            "nextStepId": "halifax_next_steps"
        },
        {
            "id": "halifax_next_steps",
            "type": "question",
            "text": "What would you like to do next?",
            "options": [
                {
                    "label": "Go back to Halifax menu",
                    "nextStepId": "city_intro"
                },
                {
                    "label": "Head to Acadia",
                    "nextStepId": "acadia_intro",
                    "condition": "!hive.hasKey('acadia_intro_completed')",
                    "elseNextStepId": "explore_acadia"
                },
                {
                    "label": "Head to the Valley (Wolfville, New Minas, Kentville)",
                    "nextStepId": "valley_intro",
                    "condition": "!hive.hasKey('valley_intro_completed')",
                    "elseNextStepId": "choose_valley_town"
                },
                {
                    "label": "Take me to the Halifax home screen",
                    "nextStepId": "explore_halifax"
                },
                {
                    "label": "Skip to generic home",
                    "nextStepId": "generic_homescreen"
                }
            ]
        },
        {
            "id": "explore_halifax",
            "type": "action",
            "action": "navigateToHalifaxHomeScreen",
            "nextStepId": "dynamic_home"
        }

    ]
}